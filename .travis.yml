language: java
sudo: false
jdk:
- oraclejdk7
cache:
  directories:
  - "~/.m2/repository"
branches:
  only:
  - master
  - developer
  - "/^release-.*$/"
install: mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn test -P !build-extras -B
after_success:
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in ./deploy/pubring.gpg.enc -out ./deploy/pubring.gpg -d
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in ./deploy/secring.gpg.enc -out ./deploy/secring.gpg -d
- "./scripts/deploy.sh"
env:
  global:
  - GPG_DIR="`pwd`/deploy"
  - secure: oNqm5KKrmv9qEze6Tg75nrLkyYpZTBWn2JepiWh4pkih0T9uehnEh3hKuNTLexqlbYD7idLGGXnp5Y71aJSUYs7wMkCkmBETrmXkqG6RQtd+p8QzHgW1t3Z72Gvh0PWePyvP7oUDvNyv8SOgslJ5DLFHRd8c0zf+aNBUZDBZTMZL6aDmCVHuRApgD8RlaO8h2mG66cUUKovGmhDV3XpjodfL63mwCQoruFrI9CG+rRdR8m3j8wu3aa/MBjULWhfNPTy701T8sPKbyVZ+vKozUkTjgMt7eD0pcKPBuotbkPkkK62S09LwzaOK4k33eN9onFwL0MMGHmwr2nNNY040Inaqg1iEvwZFSF3ZnUU2KDEEwnjXs2avDtknbRnWt4Eb/g3tIgKfViuLq3PhQWjKZFdYgT62i1g2S8Qut6ViMdEWRKntvNP3twMXD/L3Gola2bRjQ5FgS1N0Kv8uYNW60UaTG9Lk9sM2gGyPqELObKtlkOe3cV/WjiPRo4e0bgH46GWKeQYN9DQPHiqSSsluv0mkrILBjAzDfdP8N3NtRV4K3jllryjojpHdHQiCx5IgZ6drzGxDbTfDFjV0XL7mQlhFGDuFYDVT7TomYzX/BTMck+3eEivpvk7FLNzzHaSLtA7wylcfAlJqprBJBqSO8nJBSeEVdMJxHtnriZjv/s4=
  - secure: lhD8ZmUyew7g6vABd+PnSbWNbwlMDWP2JZ0KjwPHgk+QH5F38Heouf93tWj7JaZYCDxQCDqVc8nvhOrk7CgsBhocoqbLe2G9B5+Q9Fg20gfX016qYhUA9RrKLqCqJqfxj9ZmdakRwcYlQUoAi1nfl66K2XYCMjCKCau4PlADzMT35VgllixYlXBmhs2/s6vXz7o67dQ8vMUiToTT7FO+dK2eywIyo1WSBJW3N2KpGi3YsyhxHmUjRxhShrEXg5XL45OEZYxOZVCMvglw7hsHske5IwZQZNRas5hph15On8eyjK0Jwuc3i3O4Xwi/csIBTrPYidEndgUD8rzpZ/hESbKTUiXnUL93oEs5pKJQWmrTwGuakRfiAvJX+YoYVZDSUWaogMdy3HyenpTr0sx5AD4tWxZDVh3IMfT5d2zLOOmlnpeRMrMrrGkfQbB7ylW9KreTBHb9Ij6pjUbGtyNaAt0GPppv14NVuGBylH6Q6pjhKFsu3iaOra7WRrDIncGc9KtcynNYGI0JAkD5gHNWselBZuM0dzjHhvsAJbj441/BmPQDnY9A4ETeUifag/1ck461yWoYNh2X2RODRrGHuHfn51DLwx5G/S4uNHSuQHDgvMnXz9rw89KRGSPr1YwVufFdZ42MKrodBqyO0f9S6M1zSPOrIZqB/ZJvDhDRJSQ=
  - secure: Ygo4xqUWgZwgupxn8QvcNS/2yR38yIVBq1gPCEFZEvTMS7dlXaTmRSyfZpGjmxoc8AKna/ixeI5cxsqcxsC+NqinUNf6LaS1ozi6L8MrFfRuTFh+xk7X4HWlb8oGxMDNftUrMyzAF4zBqaWftQ8SsDIpoSAv8bLGB/3TBVlf7MtKkiHlH1vhZSjsbTdXy/JvI+9hpPSenkY7V1qdBmWcG6EyHpLHSe5a9ZjZ3ZI74ff+YZnPgn3O2SNU48GXeqbxVD9zBvSwdS+CZiQcDGUoeY/qQMQjL1P2bGFEqCWOo4XPxRoTkAJQ5BFcAxLlwA9LlIqLSRO1Z99MlpH9grNHgX6I8HEx+XzY966ymBy/mbe0KJXIBmIGyM3QTUOyd6bsdKB7Cr1C2mkFyNeAzPvpaYK11A+Fgp1LxMW4UXUQuHCFfhzV4W4N8S+5fa8T6qamu15dprEPhqBriM8ms9qJIyvGnANdhKfa53KzWs0cLbFPIOEzKdcqA8+/2TUGtasx6UVQMmND9sZzWmhyWpU8GSUX+JSoRM2p7jt53oHCjfXlPG4RCMDsQSvJsJZlH2rzQ1JbhySSSBcIhAWT/uVJH2F3URQj3hZjpzDB4i6puYtoxJedxXjEfxlo+IsewaXzXaiwxUxo4CXh9lrHF0T68HwVDYlb1h6iRNf0Cj3ZAzs=
  - secure: AWRJm3RYox8/hZxQFVN3MCGZrG3fkG2tXN9D04xn/zMe7oQMty+4diuEkOX95kBR7yuxGD2OqJqWPb5fzBfYqfUW0HK7y10YTUulIyQtT+55LqqY5mKsLwTuL7ab+8b7Y/yuElxzLUJ6ZbsZ1uCqP4Fo4s7NpUpCZ0FRtT70c4YkpLdLBLuzJgyLsxb+PG8tXXZV1x7jZjRXOkaCeoY4oUK8SPAQSXV+wEKwEBdKSEoKGdV6iwbYTOwIbUMtvARKsFvnxGtzOxAfnWGCaQiHkpwLcisOiPvyuudJKlNGCa344ln3QtKYCCZBdGwkTIQssIsvfmnreLXaPSrp7vknsAIwCeBwdc0aj3I/YnpKsL5tyovvF45eobFTY0lFRAo7ppei0yXFksRCB94wvH1LnYLmEwtRPJhP8419s8cVQ9VcEjqm+qFLu0WJjR41nd0FNzxIgTyNIhHlGVLRjabHtscpvBzlylwd7qfoy1kS9bpRfQTiQ3ow6/SQuCUhmv6x23s6p+Ne2UqgMasctOo0LTYey6lVG4CWftK9ocxCzHc9tr9Km4lSgeHcZJANAoORo3jgJCsh+obvBw+ioOooJRFqxPBU7/qt8luiS4oVQXLcUDRMCbSf0NelBUYSemCwYtFXUeYcri1bvaIOTiX/2MYOlogKCbGuls/AqdkfYDc=
  - secure: eF6RJq3dEUWmurjPMKMQZt6n0N+YxpUkMSt6Z1AXjXOuVqMcxm4Eaak53Z5ljpd60mjpcRSFaay/SZxjAwmnVsMaMFyDVrMVGebieYGPoz95z+XAu4Md+klkbOxIpjVKWdVgS259NQGXIuXkqXSinBj+WABcjXHAMPC6MiFyPDH5GPnsnNZL9VXisEap9lDw0wrJIwpWMo6/Od8Kfye2OlwYh2iLacWNC08tkYtmrhhd1Qjt4ToKfMoODv00ftEEEuNZXyZm9p0RZVO+UqjTIZz5oAWsUl6KGJKnefygkQ++9gOQy9oE3doYMgfkoZlu6kUEqf4KvlNBYdE2qL1WmEs81JSdSNldT1GLroD3uAxikAmil+WChbTs7LQXfY62itQsbJWacwisZQl+fomiT+jNCuv0NQEtWDWQbNtbu5MSDTdQ5rPSndZuOaadU238K+UzusQiKIev9unPovY/NgfIs1hWaT35f2fNOOFY+CP4icVdM6sX2YcRHBvKPDqKFFIZU/qRZrzyH0tX5R7c1S49VllYazvjtca4AF7UXxBUxRcjWhz2h2Yezp85q+87HoUKJbKAE8R/4rMdLvx/bRWxSiq7Wev1LmHyfPBdbNDF64cvGaa9rcXK76mDZfNP6f+C4hF6qV025114hUZkcYWVXWmaHuvcA+wPKF5UkSU=
  